<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Scale</title>

<script src="site_libs/header-attrs-2.10/header-attrs.js"></script>
<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/readable.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-5.1.0/css/all.css" rel="stylesheet" />
<link href="site_libs/font-awesome-5.1.0/css/v4-shims.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>




<style type="text/css">
/* for pandoc --citeproc since 2.11 */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.tab('show');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Frontpage</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="Covid_19_Germany202105.html">Mortality 2020: Germany</a>
</li>
<li>
  <a href="Scale.html">Scale</a>
</li>
<li>
  <a href="Backpain.html">Health Trends</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="mailto:&lt;boiled.data@gmail.com&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Scale</h1>
<h4 class="date">28 06 2021</h4>

</div>


<pre class="r"><code>#Preliminaries:

knitr::opts_chunk$set( message=FALSE, warning=FALSE) #echo = FALSE,

rm(list=ls())

library(tidyverse)
library(viridis)
library(scales)
library(stargazer)
library(WDI)


theme_set(theme_light())</code></pre>
<div id="organisms-organizations" class="section level2">
<h2>Organisms &amp; Organizations</h2>
<p>Networks play a mayor role in our life, both socially and economically, which easily can be seen by looking at the rise of the internet economy in the 21st century onward. However, networks are key mechanisms in living organisms, cities, and even companies as well. These aspects are covered in Geoffrey West’s extraordinary book ‘Scale’ <span class="citation">(West 2017)</span> which emphasizes the role of networks and scaling laws in the development and growth across the biological domain and humanly created organizations. Crucial for his analysis is that networks (such as vessels in animals, or pipelines in cities) are 1. invariant at their end points, 2. space filling and 3., optimization is taking place (evolution). For the biological domain nonlinear scaling is derived for a vast number of attributes based on these 3 assumptions, eg. there is a nonlinear association between between animal size and blood pressure. Furthermore, according to West the literature seems to suggest that, after taking the logarithms of variables, these correlations regularly involve number 4. West’s discussion of the role of scaling laws in the biological domain suggests that the magic number is rather 4 than 42, as suggested by <span class="citation">Adams (2017)</span>. ;)</p>
</div>
<div id="scaling-laws-in-practice" class="section level2">
<h2>Scaling Laws in Practice</h2>
<p>Let’s have a look at data from the real world <span class="citation">(Allison and Cicchetti 1976)</span>. According to West the association between life span and body size should be about 1/4.</p>
<pre class="r"><code>#sleep.txt generated from http://lib.stat.cmu.edu/datasets/sleep
#Data import and manipulation:
sleep_raw &lt;- read_lines(
  &quot;sleep.txt&quot;,
  skip = 50,
  n_max = 62
)

mplt_slr &lt;- str_locate_all(sleep_raw, &quot;\\s[\\d\\.\\-]&quot;) 

sleep_index &lt;- c(1:length(sleep_raw))  

for (i in sleep_index) {
  for (j in c(1:10)) {
  str_sub(sleep_raw[i],mplt_slr[[i]][j,1], mplt_slr[[i]][j,1]) &lt;- &quot;,&quot;
  
}}

sleep_df &lt;- as.data.frame(sleep_raw) %&gt;%
          separate( col=1, sep=&quot;,&quot;,  into=c(&quot;species&quot;, &quot;body_weight_kg&quot;, &quot;brain_weight_g&quot;, &quot;hrs_slow_wave_sleep&quot;, &quot;hrs_paradoxical_sleep&quot;, &quot;hrs_total_sleep&quot;, &quot;maximum_life_span&quot;, &quot;gestation_time&quot;, &quot;predation_index&quot;, &quot;sleeping_exp._index&quot;, &quot;overall_danger_index&quot;)) %&gt;%
          mutate(body_weight_kg=as.numeric(body_weight_kg), maximum_life_span=as.numeric(maximum_life_span)) %&gt;% 
          filter(body_weight_kg!=-999 &amp; maximum_life_span!=-999)        

#How does data look like?
sleep_df %&gt;%
  select(species, maximum_life_span, body_weight_kg) %&gt;%
  top_n(3)</code></pre>
<pre><code>##                     species maximum_life_span body_weight_kg
## 1  African elephant                      38.6           6654
## 2  Asian elephant                        69.0           2547
## 3 Giraffe                                28.0            529</code></pre>
<pre class="r"><code>#plot scaled association between life span and life expectancy:
sleep_df %&gt;%
  ggplot(aes(y=maximum_life_span, x=body_weight_kg)) + #, color=species
  geom_point() +
  geom_smooth(method=lm, se=FALSE, aes(color = NULL)) +
  scale_x_log10(labels = comma) + #
  scale_y_log10() +
  scale_colour_viridis_d(option = &quot;turbo&quot;) +
  labs(title=&quot;Body weight and life-span&quot;, y=&quot;life span (years)&quot;, x=&quot;body weight (kg)&quot;)</code></pre>
<p><img src="Scale_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
<p>There is a lot of variability in the data, the slope is 0.211. But we see an exponential association of 1/4 cannot be rejected statistically with the data at hand:</p>
<pre class="r"><code>lm(log(maximum_life_span) ~ log(body_weight_kg), data=sleep_df) %&gt;%
  stargazer(type=&quot;text&quot;, title=&quot;Association life-span &amp; body weight&quot;, align=TRUE, ci=TRUE)</code></pre>
<pre><code>## 
## Association life-span &amp; body weight
## ===============================================
##                         Dependent variable:    
##                     ---------------------------
##                       log(maximum_life_span)   
## -----------------------------------------------
## log(body_weight_kg)          0.211***          
##                           (0.156, 0.266)       
##                                                
## Constant                     2.282***          
##                           (2.092, 2.473)       
##                                                
## -----------------------------------------------
## Observations                    58             
## R2                             0.504           
## Adjusted R2                    0.496           
## Residual Std. Error       0.670 (df = 56)      
## F Statistic           57.002*** (df = 1; 56)   
## ===============================================
## Note:               *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
<p>According to West, similar to animals, cities and even companies can be described by their network structure (people are final leaves in a network). In the context cities, there is sublinear scaling (0.85) for the association between population and infrastructure and superlinear scaling (1.15) in the association between population and eg. wages. An interesting question would be whether the phenomenon of scaling extends to the level of countries as well. Leaving beside the fact that some conditions, such as space filling are not fulfilled on a country level, regular patterns between the size of countries and other country level outcomes may emerge as well. Let us look at Worldbank data:</p>
<pre class="r"><code>#read WB-Data from 2019:
wdi_in &lt;- WDI(
  country = &quot;all&quot;,
  indicator = c(&quot;NY.GDP.MKTP.CD&quot;, &quot;SP.POP.TOTL&quot;, &quot;SP.URB.TOTL.IN.ZS&quot;),
  start = 2019,
  end = 2019,
  extra = TRUE,
  cache = NULL,
  latest = NULL, #=1 
  language = &quot;en&quot;
)

wdi_sel &lt;- wdi_in %&gt;%
  filter(str_detect(iso2c, &quot;\\d&quot;)==FALSE)
  
  
wdi_sel %&gt;%
  ggplot(aes(y=NY.GDP.MKTP.CD/1000000000, x=SP.POP.TOTL)) + #
  geom_point() +
  geom_smooth(method=lm, se=FALSE) +
  scale_x_log10(labels = comma) +
  scale_y_log10(labels=comma) +
  scale_colour_viridis_d(option = &quot;turbo&quot;) +
  labs(title=&quot;GDP and Population in 2019&quot;, y=&quot;GDP in Billion USD&quot;, x=&quot;Population size&quot;)</code></pre>
<p><img src="Scale_files/figure-html/unnamed-chunk-3-1.png" width="672" /></p>
<p>The visual inspection of the correlation shows, as expected, GDP increases as population grows.</p>
<pre class="r"><code>lm(log(NY.GDP.MKTP.CD) ~ log(SP.POP.TOTL), data=wdi_sel) %&gt;%
  stargazer(type=&quot;text&quot;, title=&quot;Association population size &amp; GDP&quot;, align=TRUE, ci=TRUE)</code></pre>
<pre><code>## 
## Association population size &amp; GDP
## ===============================================
##                         Dependent variable:    
##                     ---------------------------
##                         log(NY.GDP.MKTP.CD)    
## -----------------------------------------------
## log(SP.POP.TOTL)             0.868***          
##                           (0.802, 0.933)       
##                                                
## Constant                     10.910***         
##                           (9.847, 11.973)      
##                                                
## -----------------------------------------------
## Observations                    224            
## R2                             0.753           
## Adjusted R2                    0.752           
## Residual Std. Error      1.393 (df = 222)      
## F Statistic          676.814*** (df = 1; 222)  
## ===============================================
## Note:               *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
<p>Comparing the associations at the country level with West’s findings concerning cities we see striking parallels. But whereas superlinear scaling of 1.15 is found for population size and wages in cities <span class="citation">(West 2017)</span>, we find sublinear scaling of about 0.85 at the level of countries, ie. if the population doubles, GDP grows by 85 percent. Obviously, the underlying mechanisms would be interesting to reveal from an developmental perspective.</p>
</div>
<div id="references" class="section level2 unnumbered">
<h2 class="unnumbered">References</h2>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-adams2017ultimate" class="csl-entry">
Adams, Douglas. 2017. <em>The Ultimate Hitchhiker’s Guide to the Galaxy: The Complete Trilogy in Five Parts</em>. Vol. 6. Pan Macmillan.
</div>
<div id="ref-allison1976sleep" class="csl-entry">
Allison, Truett, and Domenic V Cicchetti. 1976. <span>“Sleep in Mammals: Ecological and Constitutional Correlates.”</span> <em>Science</em> 194 (4266): 732–34.
</div>
<div id="ref-west2017scale" class="csl-entry">
West, Geoffrey. 2017. <span>“Scale: The Universal Laws of Life, Growth, and Death in Organisms.”</span> <em>Cities, and Companies. Penguin Publishing Group</em>.
</div>
</div>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("hide" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
